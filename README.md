# OpenAI Voice Assistant

–ì–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Å –ø—Ä—è–º–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π OpenAI API. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ (Whisper), –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –æ—Ç–≤–µ—Ç–æ–≤ (GPT) –∏ —Å–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏ (TTS) —Å–æ —Å—Ç—Ä–∏–º–∏–Ω–≥–æ–º.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üé§ **–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏** —á–µ—Ä–µ–∑ OpenAI Whisper
- ü§ñ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤** —á–µ—Ä–µ–∑ GPT-4o-mini —Å–æ —Å—Ç—Ä–∏–º–∏–Ω–≥–æ–º
- üîä **–°–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏** —á–µ—Ä–µ–∑ OpenAI TTS —Å streaming –æ—Ç–ø—Ä–∞–≤–∫–æ–π
- üí¨ **–ò—Å—Ç–æ—Ä–∏—è —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤** –ø–æ sessionId
- ‚ö° **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å** - TTS –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ —á–∞—Å—Ç—è–º
- üöÄ **–†–∞–Ω–Ω–µ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ** - –∞—É–¥–∏–æ –Ω–∞—á–∏–Ω–∞–µ—Ç –∏–≥—Ä–∞—Ç—å –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
npm install
```

2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```env
OPENAI_API_KEY=your-api-key-here
PORT=3000
```

## –ó–∞–ø—É—Å–∫

```bash
# –û–±—ã—á–Ω—ã–π –∑–∞–ø—É—Å–∫
npm start

# –° –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
npm run dev
```

–°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:3000`

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ `index.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ –¥–ª—è –Ω–∞—á–∞–ª–∞ –∑–∞–ø–∏—Å–∏
3. –ì–æ–≤–æ—Ä–∏—Ç–µ –≤ –º–∏–∫—Ä–æ—Ñ–æ–Ω
4. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–ø–∏—Å–∏
5. –î–æ–∂–¥–∏—Ç–µ—Å—å –æ—Ç–≤–µ—Ç–∞ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞

## API

### POST `/api/voice`

–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≥–æ–ª–æ—Å–æ–≤–æ–π –∑–∞–ø—Ä–æ—Å –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞—É–¥–∏–æ –æ—Ç–≤–µ—Ç.

**–ó–∞–ø—Ä–æ—Å:**
- `Content-Type: multipart/form-data`
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
  - `file`: –∞—É–¥–∏–æ —Ñ–∞–π–ª (WebM, MP3, WAV, M4A –∏ –¥—Ä.)
  - `sessionId`: ID —Å–µ—Å—Å–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞)

**–û—Ç–≤–µ—Ç:**
- `Content-Type: audio/mpeg`
- `Transfer-Encoding: chunked`
- Streaming –∞—É–¥–∏–æ –¥–∞–Ω–Ω—ã–µ (–æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø–æ —á–∞—Å—Ç—è–º –ø–æ –º–µ—Ä–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏)

**–ü—Ä–∏–º–µ—Ä:**
```javascript
const formData = new FormData();
formData.append('file', audioBlob);
formData.append('sessionId', 'session-123');

const response = await fetch('http://localhost:3000/api/voice', {
    method: 'POST',
    body: formData
});

const audioBlob = await response.blob();
```

### GET `/health`

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞.

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "ok",
  "timestamp": "2024-12-01T12:00:00.000Z",
  "openai_configured": true
}
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
Frontend (index.html)
    ‚Üì
Express Server (server.js)
    ‚Üì
OpenAI Whisper (—Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è)
    ‚Üì
OpenAI GPT-4o-mini (streaming –æ—Ç–≤–µ—Ç)
    ‚Üì (–ø–æ –º–µ—Ä–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞)
OpenAI TTS (—Å–∏–Ω—Ç–µ–∑ –ø–æ —á–∞—Å—Ç—è–º)
    ‚Üì (–æ—Ç–ø—Ä–∞–≤–∫–∞ —á–∞–Ω–∫–∞–º–∏)
Streaming Audio ‚Üí Frontend (—Ä–∞–Ω–Ω–µ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ)
```

### Streaming –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

–î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ –æ—Ç–≤–µ—Ç–∞:
1. GPT streaming –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç –ø–æ —á–∞—Å—Ç—è–º
2. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ (20+ —Å–∏–º–≤–æ–ª–æ–≤), –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ TTS
3. TTS –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∞—É–¥–∏–æ –∏ —Å—Ä–∞–∑—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É
4. Frontend –Ω–∞—á–∏–Ω–∞–µ—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ ~15KB –¥–∞–Ω–Ω—ã—Ö
5. –ù–æ–≤—ã–µ —á–∞–Ω–∫–∏ –∞—É–¥–∏–æ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫ —É–∂–µ –∏–≥—Ä–∞—é—â–µ–º—É —Ç—Ä–µ–∫—É

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Ä–µ–º—è –¥–æ –ø–µ—Ä–≤–æ–≥–æ –∑–≤—É–∫–∞ —Å–æ–∫—Ä–∞—â–∞–µ—Ç—Å—è —Å 3-5 —Å–µ–∫—É–Ω–¥ –¥–æ 1-2 —Å–µ–∫—É–Ω–¥!

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### –ú–æ–¥–µ–ª–∏ OpenAI

–í `server.js` –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å:
- **Whisper**: `model: 'whisper-1'` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- **GPT**: `model: 'gpt-4o-mini'` (–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞ `gpt-4`, `gpt-3.5-turbo` –∏ –¥—Ä.)
- **TTS**: `model: 'tts-1'` (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `tts-1-hd` –¥–ª—è –ª—É—á—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞)

### –ì–æ–ª–æ—Å TTS

–î–æ—Å—Ç—É–ø–Ω—ã–µ –≥–æ–ª–æ—Å–∞: `alloy`, `echo`, `fable`, `onyx`, `nova`, `shimmer`

### –ò—Å—Ç–æ—Ä–∏—è —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤

–ò—Å—Ç–æ—Ä–∏—è —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ `sessionId`. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π.

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ VPS

–î–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ VPS —Å–µ—Ä–≤–µ—Ä–µ —Å–º–æ—Ç—Ä–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –≤ —Ñ–∞–π–ª–µ [DEPLOY.md](./DEPLOY.md).

**–ö—Ä–∞—Ç–∫–æ:**
1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `npm install --production`
3. –°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª —Å –≤–∞—à–∏–º `OPENAI_API_KEY` (—Å–º. `env.template`)
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ PM2: `pm2 start ecosystem.config.js`
5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Nginx –∫–∞–∫ reverse proxy (—Å–º. `nginx.conf`)

üìñ **–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** [DEPLOY.md](./DEPLOY.md)

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 18+
- OpenAI API –∫–ª—é—á
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π MediaRecorder API

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

